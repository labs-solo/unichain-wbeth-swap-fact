# HyperIndex config for UniChain WBTC/ETH swap indexing
# Tracks only the two specified pools: hooked (AEGIS_DFM) and static

name: unichain-wbtc-eth-swaps
description: "Indexes WBTC/ETH swaps from hooked and static pools on UniChain"

indexers:
  - name: uni_v4_wbeth
    chain: unichain
    # ⬇️ begin at first pool-creation block to avoid useless back-fill
    start_block: 18_650_793            # ← block 18650793
    mappings: infra/hyperindex/mappings.ts
    # ⬇️ filter at the subscription layer
    pool_filter:
      - ${HOOKED_POOL}                 # 0x4107…e1f
      - ${STATIC_POOL}                 # 0x51f9…3496e
    entities:
      - Swap

# Database configuration
database:
  type: postgres
  host: ${DATABASE_HOST:-postgres}
  port: ${DATABASE_PORT:-5432}
  database: ${DATABASE_NAME:-postgres}
  username: ${DATABASE_USER:-postgres}
  password: ${DATABASE_PASSWORD:-secret}

# Target table for raw swaps
target_table: raw_unichain_swaps

# Optional: Block confirmation settings
confirmations: 1

# Logging
log_level: info
log_format: json
